import{m as s}from"./index-9791be84.js";import{g as d,s as n,i as o}from"./utils-d6e70818.js";const u=s.object({email:s.string().email(),first_name:s.string(),host:s.string(),id:s.number(),is_sys_admin:s.boolean(),last_login_date:s.coerce.date(),last_name:s.string(),name:s.string(),session_id:s.string(),session_token:s.string()}),a={},f="http",p=`${f}://${d()}/api/v2`;a.login=async(r,i)=>{const c=new Headers({"Content-Type":"application/json"}),l=JSON.stringify({email:r,password:i}),m=`${p}/user/session`,e=await fetch(m,{method:"POST",headers:c,body:l});if(!e.ok)throw new Error(e.statusText);const g=await e.json(),t=u.safeParse(g);return t.success?(n.set(t.data),o.set(!0),!0):!1};a.logout=()=>{n.set(null),o.set(!1)};export{a as A};
