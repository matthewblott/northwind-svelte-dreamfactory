import{S as U,i as V,s as X,Y as J,k as v,q,a as P,x as L,e as K,l as E,m as w,r as B,h,c as A,y as O,b as D,I as u,z as R,Z as x,f as H,t as I,A as W,u as z,C as S,n as N,g as tt,d as et,W as at}from"../../../../chunks/index-867ab049.js";import{E as ot}from"../../../../chunks/edit-058cb14e.js";import{P as rt,a as lt}from"../../../../chunks/Pager-3c02cb40.js";import{g as nt}from"../../../../chunks/navigation-8c5881c7.js";import{C as st}from"../../../../chunks/category-e8b76436.js";import"../../../../chunks/index-4d8f42c1.js";async function ct(s,t){return await st.fetchPaged(s,t)}function M(s,t,o){const e=s.slice();return e[5]=t[o].id,e[6]=t[o].attributes,e}function ft(s){let t=s[9]+"",o;return{c(){o=q(t)},l(e){o=B(e,t)},m(e,n){D(e,o,n)},p(e,n){n&1&&t!==(t=e[9]+"")&&z(o,t)},i:S,o:S,d(e){e&&h(o)}}}function it(s){let t,o,e,n,p,m,d,g,f,a,l,b,y,T;l=new lt({});let $=s[4].data,r=[];for(let i=0;i<$.length;i+=1)r[i]=Q(M(s,$,i));const k=i=>I(r[i],1,1,()=>{r[i]=null});return{c(){t=v("table"),o=v("thead"),e=v("th"),n=q("Id"),p=P(),m=v("th"),d=q("Name"),g=P(),f=v("th"),a=v("a"),L(l.$$.fragment),b=P(),y=v("tbody");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){t=E(i,"TABLE",{role:!0});var _=w(t);o=E(_,"THEAD",{});var c=w(o);e=E(c,"TH",{scope:!0});var C=w(e);n=B(C,"Id"),C.forEach(h),p=A(c),m=E(c,"TH",{scope:!0});var Z=w(m);d=B(Z,"Name"),Z.forEach(h),g=A(c),f=E(c,"TH",{});var j=w(f);a=E(j,"A",{href:!0});var F=w(a);O(l.$$.fragment,F),F.forEach(h),j.forEach(h),c.forEach(h),b=A(_),y=E(_,"TBODY",{});var G=w(y);for(let Y=0;Y<r.length;Y+=1)r[Y].l(G);G.forEach(h),_.forEach(h),this.h()},h(){N(e,"scope","col"),N(m,"scope","col"),N(a,"href","/categories/new"),N(t,"role","grid")},m(i,_){D(i,t,_),u(t,o),u(o,e),u(e,n),u(o,p),u(o,m),u(m,d),u(o,g),u(o,f),u(f,a),R(l,a,null),u(t,b),u(t,y);for(let c=0;c<r.length;c+=1)r[c].m(y,null);T=!0},p(i,_){if(_&1){$=i[4].data;let c;for(c=0;c<$.length;c+=1){const C=M(i,$,c);r[c]?(r[c].p(C,_),H(r[c],1)):(r[c]=Q(C),r[c].c(),H(r[c],1),r[c].m(y,null))}for(tt(),c=$.length;c<r.length;c+=1)k(c);et()}},i(i){if(!T){H(l.$$.fragment,i);for(let _=0;_<$.length;_+=1)H(r[_]);T=!0}},o(i){I(l.$$.fragment,i),r=r.filter(Boolean);for(let _=0;_<r.length;_+=1)I(r[_]);T=!1},d(i){i&&h(t),W(l),at(r,i)}}}function Q(s){let t,o,e=s[5]+"",n,p,m,d=s[6].categoryName+"",g,f,a,l,b,y,T,$;return b=new ot({}),{c(){t=v("tr"),o=v("td"),n=q(e),p=P(),m=v("td"),g=q(d),f=P(),a=v("td"),l=v("a"),L(b.$$.fragment),T=P(),this.h()},l(r){t=E(r,"TR",{});var k=w(t);o=E(k,"TD",{scope:!0});var i=w(o);n=B(i,e),i.forEach(h),p=A(k),m=E(k,"TD",{});var _=w(m);g=B(_,d),_.forEach(h),f=A(k),a=E(k,"TD",{});var c=w(a);l=E(c,"A",{href:!0});var C=w(l);O(b.$$.fragment,C),C.forEach(h),c.forEach(h),T=A(k),k.forEach(h),this.h()},h(){N(o,"scope","row"),N(l,"href",y="/categories/"+s[5])},m(r,k){D(r,t,k),u(t,o),u(o,n),u(t,p),u(t,m),u(m,g),u(t,f),u(t,a),u(a,l),R(b,l,null),u(t,T),$=!0},p(r,k){(!$||k&1)&&e!==(e=r[5]+"")&&z(n,e),(!$||k&1)&&d!==(d=r[6].categoryName+"")&&z(g,d),(!$||k&1&&y!==(y="/categories/"+r[5]))&&N(l,"href",y)},i(r){$||(H(b.$$.fragment,r),$=!0)},o(r){I(b.$$.fragment,r),$=!1},d(r){r&&h(t),W(b)}}}function ut(s){let t,o;return{c(){t=v("p"),o=q("waiting for the promise to resolve...")},l(e){t=E(e,"P",{});var n=w(t);o=B(n,"waiting for the promise to resolve..."),n.forEach(h)},m(e,n){D(e,t,n),u(t,o)},p:S,i:S,o:S,d(e){e&&h(t)}}}function ht(s){let t,o,e,n,p,m,d,g;n=new rt({props:{limit:10,count:s[1]}}),n.$on("next",s[2]);let f={ctx:s,current:null,token:null,hasCatch:!0,pending:ut,then:it,catch:ft,value:4,error:9,blocks:[,,,]};return J(d=s[0],f),{c(){t=v("h1"),o=q("Categories"),e=P(),L(n.$$.fragment),p=P(),m=K(),f.block.c()},l(a){t=E(a,"H1",{});var l=w(t);o=B(l,"Categories"),l.forEach(h),e=A(a),O(n.$$.fragment,a),p=A(a),m=K(),f.block.l(a)},m(a,l){D(a,t,l),u(t,o),D(a,e,l),R(n,a,l),D(a,p,l),D(a,m,l),f.block.m(a,f.anchor=l),f.mount=()=>m.parentNode,f.anchor=m,g=!0},p(a,[l]){s=a;const b={};l&2&&(b.count=s[1]),n.$set(b),f.ctx=s,l&1&&d!==(d=s[0])&&J(d,f)||x(f,s,l)},i(a){g||(H(n.$$.fragment,a),H(f.block),g=!0)},o(a){I(n.$$.fragment,a);for(let l=0;l<3;l+=1){const b=f.blocks[l];I(b)}g=!1},d(a){a&&h(t),a&&h(e),W(n,a),a&&h(p),a&&h(m),f.block.d(a),f.token=null,f=null}}}function mt(s,t,o){let e,n,{data:p}=t;const m=async d=>{const g=d.detail.offset,f=10,a=`?limit=${f}&offset=${g}`;nt(a),o(0,e=await ct(f,g)),o(1,n=e.meta.count)};return s.$$set=d=>{"data"in d&&o(3,p=d.data)},s.$$.update=()=>{s.$$.dirty&8&&o(0,e=p),s.$$.dirty&1&&o(1,n=e.meta.total)},[e,n,m,p]}class kt extends U{constructor(t){super(),V(this,t,mt,ht,X,{data:3})}}export{kt as default};
