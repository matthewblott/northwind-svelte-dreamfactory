import{S as U,i as V,s as X,Y as J,k as v,q,a as H,x as L,e as K,l as E,m as w,r as B,h,c as P,y as O,b as N,I as u,z as R,Z as x,f as A,t as I,A as W,u as z,C as S,n as D,g as tt,d as et,W as at}from"../../../../chunks/index-867ab049.js";import{E as ot}from"../../../../chunks/edit-058cb14e.js";import{P as rt,a as lt}from"../../../../chunks/Pager-3c02cb40.js";import{g as nt}from"../../../../chunks/navigation-8c5881c7.js";import{C as st}from"../../../../chunks/customer-74249bcf.js";import"../../../../chunks/index-4d8f42c1.js";async function ct(s,t){return await st.fetchPaged(s,t)}function M(s,t,a){const e=s.slice();return e[5]=t[a].id,e[6]=t[a].attributes,e}function ft(s){let t=s[9]+"",a;return{c(){a=q(t)},l(e){a=B(e,t)},m(e,n){N(e,a,n)},p(e,n){n&1&&t!==(t=e[9]+"")&&z(a,t)},i:S,o:S,d(e){e&&h(a)}}}function it(s){let t,a,e,n,g,m,p,d,f,o,l,b,y,T;l=new lt({});let $=s[4].data,r=[];for(let i=0;i<$.length;i+=1)r[i]=Q(M(s,$,i));const k=i=>I(r[i],1,1,()=>{r[i]=null});return{c(){t=v("table"),a=v("thead"),e=v("th"),n=q("Id"),g=H(),m=v("th"),p=q("Name"),d=H(),f=v("th"),o=v("a"),L(l.$$.fragment),b=H(),y=v("tbody");for(let i=0;i<r.length;i+=1)r[i].c();this.h()},l(i){t=E(i,"TABLE",{role:!0});var _=w(t);a=E(_,"THEAD",{});var c=w(a);e=E(c,"TH",{scope:!0});var C=w(e);n=B(C,"Id"),C.forEach(h),g=P(c),m=E(c,"TH",{scope:!0});var Z=w(m);p=B(Z,"Name"),Z.forEach(h),d=P(c),f=E(c,"TH",{});var j=w(f);o=E(j,"A",{href:!0});var F=w(o);O(l.$$.fragment,F),F.forEach(h),j.forEach(h),c.forEach(h),b=P(_),y=E(_,"TBODY",{});var G=w(y);for(let Y=0;Y<r.length;Y+=1)r[Y].l(G);G.forEach(h),_.forEach(h),this.h()},h(){D(e,"scope","col"),D(m,"scope","col"),D(o,"href","/customers/new"),D(t,"role","grid")},m(i,_){N(i,t,_),u(t,a),u(a,e),u(e,n),u(a,g),u(a,m),u(m,p),u(a,d),u(a,f),u(f,o),R(l,o,null),u(t,b),u(t,y);for(let c=0;c<r.length;c+=1)r[c].m(y,null);T=!0},p(i,_){if(_&1){$=i[4].data;let c;for(c=0;c<$.length;c+=1){const C=M(i,$,c);r[c]?(r[c].p(C,_),A(r[c],1)):(r[c]=Q(C),r[c].c(),A(r[c],1),r[c].m(y,null))}for(tt(),c=$.length;c<r.length;c+=1)k(c);et()}},i(i){if(!T){A(l.$$.fragment,i);for(let _=0;_<$.length;_+=1)A(r[_]);T=!0}},o(i){I(l.$$.fragment,i),r=r.filter(Boolean);for(let _=0;_<r.length;_+=1)I(r[_]);T=!1},d(i){i&&h(t),W(l),at(r,i)}}}function Q(s){let t,a,e=s[5]+"",n,g,m,p=s[6].companyName+"",d,f,o,l,b,y,T,$;return b=new ot({}),{c(){t=v("tr"),a=v("th"),n=q(e),g=H(),m=v("td"),d=q(p),f=H(),o=v("td"),l=v("a"),L(b.$$.fragment),T=H(),this.h()},l(r){t=E(r,"TR",{});var k=w(t);a=E(k,"TH",{scope:!0});var i=w(a);n=B(i,e),i.forEach(h),g=P(k),m=E(k,"TD",{});var _=w(m);d=B(_,p),_.forEach(h),f=P(k),o=E(k,"TD",{});var c=w(o);l=E(c,"A",{href:!0});var C=w(l);O(b.$$.fragment,C),C.forEach(h),c.forEach(h),T=P(k),k.forEach(h),this.h()},h(){D(a,"scope","row"),D(l,"href",y="/customers/"+s[5])},m(r,k){N(r,t,k),u(t,a),u(a,n),u(t,g),u(t,m),u(m,d),u(t,f),u(t,o),u(o,l),R(b,l,null),u(t,T),$=!0},p(r,k){(!$||k&1)&&e!==(e=r[5]+"")&&z(n,e),(!$||k&1)&&p!==(p=r[6].companyName+"")&&z(d,p),(!$||k&1&&y!==(y="/customers/"+r[5]))&&D(l,"href",y)},i(r){$||(A(b.$$.fragment,r),$=!0)},o(r){I(b.$$.fragment,r),$=!1},d(r){r&&h(t),W(b)}}}function ut(s){let t,a;return{c(){t=v("p"),a=q("waiting for the promise to resolve...")},l(e){t=E(e,"P",{});var n=w(t);a=B(n,"waiting for the promise to resolve..."),n.forEach(h)},m(e,n){N(e,t,n),u(t,a)},p:S,i:S,o:S,d(e){e&&h(t)}}}function ht(s){let t,a,e,n,g,m,p,d;n=new rt({props:{limit:10,count:s[1]}}),n.$on("next",s[2]);let f={ctx:s,current:null,token:null,hasCatch:!0,pending:ut,then:it,catch:ft,value:4,error:9,blocks:[,,,]};return J(p=s[0],f),{c(){t=v("h1"),a=q("Customers"),e=H(),L(n.$$.fragment),g=H(),m=K(),f.block.c()},l(o){t=E(o,"H1",{});var l=w(t);a=B(l,"Customers"),l.forEach(h),e=P(o),O(n.$$.fragment,o),g=P(o),m=K(),f.block.l(o)},m(o,l){N(o,t,l),u(t,a),N(o,e,l),R(n,o,l),N(o,g,l),N(o,m,l),f.block.m(o,f.anchor=l),f.mount=()=>m.parentNode,f.anchor=m,d=!0},p(o,[l]){s=o;const b={};l&2&&(b.count=s[1]),n.$set(b),f.ctx=s,l&1&&p!==(p=s[0])&&J(p,f)||x(f,s,l)},i(o){d||(A(n.$$.fragment,o),A(f.block),d=!0)},o(o){I(n.$$.fragment,o);for(let l=0;l<3;l+=1){const b=f.blocks[l];I(b)}d=!1},d(o){o&&h(t),o&&h(e),W(n,o),o&&h(g),o&&h(m),f.block.d(o),f.token=null,f=null}}}function mt(s,t,a){let e,n,{data:g}=t;const m=async p=>{const d=p.detail.offset,f=10,l=`?limit=${f}&offset=${d}&page[number]=${d}`;nt(l),a(0,e=await ct(f,d)),a(1,n=e.meta.total)};return s.$$set=p=>{"data"in p&&a(3,g=p.data)},s.$$.update=()=>{s.$$.dirty&8&&a(0,e=g),s.$$.dirty&1&&a(1,n=e.meta.total)},[e,n,m,g]}class kt extends U{constructor(t){super(),V(this,t,mt,ht,X,{data:3})}}export{kt as default};
