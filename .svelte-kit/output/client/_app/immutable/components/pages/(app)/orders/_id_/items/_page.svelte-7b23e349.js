import{S as lt,i as ft,s as ct,k as E,q as L,a as k,x as U,l as v,m as b,r as M,h as f,c as A,y as W,n as X,b as S,I as n,z as Y,O as ut,P as mt,f as C,d as ht,t as J,A as j,W as it,J as dt,o as pt,u as rt,g as _t}from"../../../../../../chunks/index-867ab049.js";import{E as $t}from"../../../../../../chunks/edit-058cb14e.js";import{P as gt,a as Et}from"../../../../../../chunks/Pager-3c02cb40.js";import{X as vt}from"../../../../../../chunks/x-square-e5035e27.js";import{O as bt}from"../../../../../../chunks/order-details-54433f3c.js";import"../../../../../../chunks/index-4d8f42c1.js";import{g as at}from"../../../../../../chunks/navigation-8c5881c7.js";import{p as Pt}from"../../../../../../chunks/stores-a7d73af8.js";async function Tt(h,e,o){const l=`OrderId=${o}`;return await bt.fetchFilteredPaged(h,e,l)}function ot(h,e,o){const l=h.slice();return l[9]=e[o].OrderId,l[10]=e[o].ProductId,l[11]=e[o].ProductName,l}function st(h){let e,o,l=h[10]+"",i,P,$,g=h[11]+"",T,O,d,m,r,I,w,p;return r=new $t({}),{c(){e=E("tr"),o=E("th"),i=L(l),P=k(),$=E("td"),T=L(g),O=k(),d=E("td"),m=E("a"),U(r.$$.fragment),w=k(),this.h()},l(c){e=v(c,"TR",{});var _=b(e);o=v(_,"TH",{scope:!0});var B=b(o);i=M(B,l),B.forEach(f),P=A(_),$=v(_,"TD",{});var D=b($);T=M(D,g),D.forEach(f),O=A(_),d=v(_,"TD",{});var q=b(d);m=v(q,"A",{href:!0});var z=b(m);W(r.$$.fragment,z),z.forEach(f),q.forEach(f),w=A(_),_.forEach(f),this.h()},h(){X(o,"scope","row"),X(m,"href",I="/orders/"+h[9]+"/items/"+h[10])},m(c,_){S(c,e,_),n(e,o),n(o,i),n(e,P),n(e,$),n($,T),n(e,O),n(e,d),n(d,m),Y(r,m,null),n(e,w),p=!0},p(c,_){(!p||_&1)&&l!==(l=c[10]+"")&&rt(i,l),(!p||_&1)&&g!==(g=c[11]+"")&&rt(T,g),(!p||_&1&&I!==(I="/orders/"+c[9]+"/items/"+c[10]))&&X(m,"href",I)},i(c){p||(C(r.$$.fragment,c),p=!0)},o(c){J(r.$$.fragment,c),p=!1},d(c){c&&f(e),j(r)}}}function It(h){let e,o,l,i,P,$,g,T,O,d,m,r,I,w,p,c,_,B,D,q,z,F,R,G,Q;i=new gt({props:{limit:10,count:h[1]}}),i.$on("next",h[3]),g=new vt({}),q=new Et({});let N=h[0],a=[];for(let t=0;t<N.length;t+=1)a[t]=st(ot(h,N,t));const nt=t=>J(a[t],1,1,()=>{a[t]=null});return{c(){e=E("h1"),o=L("Order Items"),l=k(),U(i.$$.fragment),P=k(),$=E("button"),U(g.$$.fragment),T=L(" Cancel"),O=k(),d=E("table"),m=E("thead"),r=E("th"),I=L("Product Id"),w=k(),p=E("th"),c=L("Product Name"),_=k(),B=E("th"),D=E("a"),U(q.$$.fragment),z=k(),F=E("tbody");for(let t=0;t<a.length;t+=1)a[t].c();this.h()},l(t){e=v(t,"H1",{});var s=b(e);o=M(s,"Order Items"),s.forEach(f),l=A(t),W(i.$$.fragment,t),P=A(t),$=v(t,"BUTTON",{});var y=b($);W(g.$$.fragment,y),T=M(y," Cancel"),y.forEach(f),O=A(t),d=v(t,"TABLE",{role:!0});var u=b(d);m=v(u,"THEAD",{});var H=b(m);r=v(H,"TH",{scope:!0});var V=b(r);I=M(V,"Product Id"),V.forEach(f),w=A(H),p=v(H,"TH",{scope:!0});var Z=b(p);c=M(Z,"Product Name"),Z.forEach(f),_=A(H),B=v(H,"TH",{});var x=b(B);D=v(x,"A",{href:!0});var tt=b(D);W(q.$$.fragment,tt),tt.forEach(f),x.forEach(f),H.forEach(f),z=A(u),F=v(u,"TBODY",{});var et=b(F);for(let K=0;K<a.length;K+=1)a[K].l(et);et.forEach(f),u.forEach(f),this.h()},h(){X(r,"scope","col"),X(p,"scope","col"),X(D,"href","/orders/"+h[2]+"/items/new"),X(d,"role","grid")},m(t,s){S(t,e,s),n(e,o),S(t,l,s),Y(i,t,s),S(t,P,s),S(t,$,s),Y(g,$,null),n($,T),S(t,O,s),S(t,d,s),n(d,m),n(m,r),n(r,I),n(m,w),n(m,p),n(p,c),n(m,_),n(m,B),n(B,D),Y(q,D,null),n(d,z),n(d,F);for(let y=0;y<a.length;y+=1)a[y].m(F,null);R=!0,G||(Q=ut($,"click",mt(h[4])),G=!0)},p(t,[s]){const y={};if(s&2&&(y.count=t[1]),i.$set(y),s&1){N=t[0];let u;for(u=0;u<N.length;u+=1){const H=ot(t,N,u);a[u]?(a[u].p(H,s),C(a[u],1)):(a[u]=st(H),a[u].c(),C(a[u],1),a[u].m(F,null))}for(_t(),u=N.length;u<a.length;u+=1)nt(u);ht()}},i(t){if(!R){C(i.$$.fragment,t),C(g.$$.fragment,t),C(q.$$.fragment,t);for(let s=0;s<N.length;s+=1)C(a[s]);R=!0}},o(t){J(i.$$.fragment,t),J(g.$$.fragment,t),J(q.$$.fragment,t),a=a.filter(Boolean);for(let s=0;s<a.length;s+=1)J(a[s]);R=!1},d(t){t&&f(e),t&&f(l),j(i,t),t&&f(P),t&&f($),j(g),t&&f(O),t&&f(d),j(q),it(a,t),G=!1,Q()}}}function Ot(h,e,o){let l,i,P;dt(h,Pt,r=>o(5,P=r));const g=P.url.pathname.split("/").filter(r=>r!==""),T=parseInt(g[1]),O=r=>{const I=r.detail.offset;d(I)},d=async(r=0)=>{const I=P.url.pathname,w=10,p=await Tt(w,r,T),c=`${I}?limit=${w}&offset=${r}`;at(c),o(1,i=p.meta.count),o(0,l=p.resource)},m=()=>{at(`/orders/${T}`)};return pt(()=>{d()}),o(0,l=[]),o(1,i=0),[l,i,T,O,m]}class Nt extends lt{constructor(e){super(),ft(this,e,Ot,It,ct,{})}}export{Nt as default};
