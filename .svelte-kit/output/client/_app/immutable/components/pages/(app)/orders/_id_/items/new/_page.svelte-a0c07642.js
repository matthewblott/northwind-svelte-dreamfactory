import{S as ie,i as se,s as fe,Y as re,a as k,x as L,c as O,y as C,b as v,z as q,Z as me,f as A,t as B,h as u,A as D,o as ce,k as p,q as P,l as h,m as $,r as E,I as c,u as x,e as X,n as I,W as _e,C as ue,O as de,P as pe,$ as he,_ as $e,J as ve}from"../../../../../../../chunks/index-867ab049.js";import{v as be,r as ge}from"../../../../../../../chunks/index-5fe216d9.js";import{S as ke}from"../../../../../../../chunks/save-6c65ae61.js";import{X as Oe}from"../../../../../../../chunks/x-square-e5035e27.js";import{O as Ie}from"../../../../../../../chunks/order-details-54433f3c.js";import{O as Pe}from"../../../../../../../chunks/order-details-cb769fe6.js";import{g as ne}from"../../../../../../../chunks/navigation-8c5881c7.js";import{N as K}from"../../../../../../../chunks/NumberField-dfb85c92.js";import{p as Ee}from"../../../../../../../chunks/stores-a7d73af8.js";import{P as we}from"../../../../../../../chunks/product-2363667c.js";import{V as Se}from"../../../../../../../chunks/Validation-fc70f5a9.js";import{c as Ne}from"../../../../../../../chunks/create-form-0a4ac59b.js";function ae(o,e,l){const n=o.slice();return n[4]=e[l].ProductId,n[5]=e[l].ProductName,n}function Te(o){let e,l,n=o[8].message+"",r;return{c(){e=p("p"),l=P("Something went wrong: "),r=P(n)},l(t){e=h(t,"P",{});var a=$(e);l=E(a,"Something went wrong: "),r=E(a,n),a.forEach(u)},m(t,a){v(t,e,a),c(e,l),c(e,r)},p(t,a){a&4&&n!==(n=t[8].message+"")&&x(r,n)},d(t){t&&u(e)}}}function ye(o){let e,l=o[3]&&le(o);return{c(){l&&l.c(),e=X()},l(n){l&&l.l(n),e=X()},m(n,r){l&&l.m(n,r),v(n,e,r)},p(n,r){n[3]?l?l.p(n,r):(l=le(n),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(n){l&&l.d(n),n&&u(e)}}}function le(o){let e,l,n,r,t,a=o[3],i=[];for(let s=0;s<a.length;s+=1)i[s]=oe(ae(o,a,s));return{c(){e=p("label"),l=P("Product"),n=k(),r=p("select"),t=p("option");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){e=h(s,"LABEL",{for:!0});var _=$(e);l=E(_,"Product"),_.forEach(u),n=O(s),r=h(s,"SELECT",{name:!0,id:!0});var f=$(r);t=h(f,"OPTION",{}),$(t).forEach(u);for(let g=0;g<i.length;g+=1)i[g].l(f);f.forEach(u),this.h()},h(){I(e,"for",o[1]),t.__value="",t.value=t.__value,I(r,"name",o[1]),I(r,"id",o[1])},m(s,_){v(s,e,_),c(e,l),v(s,n,_),v(s,r,_),c(r,t);for(let f=0;f<i.length;f+=1)i[f].m(r,null)},p(s,_){if(_&2&&I(e,"for",s[1]),_&9){a=s[3];let f;for(f=0;f<a.length;f+=1){const g=ae(s,a,f);i[f]?i[f].p(g,_):(i[f]=oe(g),i[f].c(),i[f].m(r,null))}for(;f<i.length;f+=1)i[f].d(1);i.length=a.length}_&2&&I(r,"name",s[1]),_&2&&I(r,"id",s[1])},d(s){s&&u(e),s&&u(n),s&&u(r),_e(i,s)}}}function Le(o){let e,l=o[5]+"",n,r;return{c(){e=p("option"),n=P(l),this.h()},l(t){e=h(t,"OPTION",{});var a=$(e);n=E(a,l),a.forEach(u),this.h()},h(){e.__value=r=o[4],e.value=e.__value},m(t,a){v(t,e,a),c(e,n)},p(t,a){a&8&&l!==(l=t[5]+"")&&x(n,l),a&8&&r!==(r=t[4])&&(e.__value=r,e.value=e.__value)},d(t){t&&u(e)}}}function Ce(o){let e,l=o[5]+"",n,r;return{c(){e=p("option"),n=P(l),this.h()},l(t){e=h(t,"OPTION",{});var a=$(e);n=E(a,l),a.forEach(u),this.h()},h(){e.__value=r=o[4],e.value=e.__value,e.selected=!0},m(t,a){v(t,e,a),c(e,n)},p(t,a){a&8&&l!==(l=t[5]+"")&&x(n,l),a&8&&r!==(r=t[4])&&(e.__value=r,e.value=e.__value)},d(t){t&&u(e)}}}function oe(o){let e;function l(t,a){return t[4]===t[0]?Ce:Le}let n=l(o),r=n(o);return{c(){r.c(),e=X()},l(t){r.l(t),e=X()},m(t,a){r.m(t,a),v(t,e,a)},p(t,a){n===(n=l(t))&&r?r.p(t,a):(r.d(1),r=n(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){r.d(t),t&&u(e)}}}function qe(o){let e,l;return{c(){e=p("p"),l=P("Loading ...")},l(n){e=h(n,"P",{});var r=$(e);l=E(r,"Loading ..."),r.forEach(u)},m(n,r){v(n,e,r),c(e,l)},p:ue,d(n){n&&u(e)}}}function Ae(o){let e,l,n,r,t={ctx:o,current:null,token:null,hasCatch:!0,pending:qe,then:ye,catch:Te,error:8};return re(e=o[2],t),n=new Se({props:{name:o[1]}}),{c(){t.block.c(),l=k(),L(n.$$.fragment)},l(a){t.block.l(a),l=O(a),C(n.$$.fragment,a)},m(a,i){t.block.m(a,t.anchor=i),t.mount=()=>l.parentNode,t.anchor=l,v(a,l,i),q(n,a,i),r=!0},p(a,[i]){o=a,t.ctx=o,i&4&&e!==(e=o[2])&&re(e,t)||me(t,o,i);const s={};i&2&&(s.name=o[1]),n.$set(s)},i(a){r||(A(n.$$.fragment,a),r=!0)},o(a){B(n.$$.fragment,a),r=!1},d(a){t.block.d(a),t.token=null,t=null,a&&u(l),D(n,a)}}}function Be(o,e,l){let n=Promise.resolve(),{value:r}=e,{name:t="Product"}=e,a=[];return ce(async()=>{l(2,n=await we.fetchAll()),l(3,a=n.resource)}),o.$$set=i=>{"value"in i&&l(0,r=i.value),"name"in i&&l(1,t=i.name)},[r,t,n,a]}class De extends ie{constructor(e){super(),se(this,e,Be,Ae,fe,{value:0,name:1})}}function Fe(o){let e,l,n,r,t,a,i,s,_,f,g,z,d,F,H,J,w,Q,S,R,N,W,T,Y,y,M,Z,ee;return a=new ke({}),f=new Oe({}),S=new De({props:{name:"ProductId"}}),N=new K({props:{name:"UnitPrice"}}),T=new K({props:{name:"Quantity"}}),y=new K({props:{name:"Discount"}}),{c(){e=p("h1"),l=P("Order Item"),n=k(),r=p("form"),t=p("button"),L(a.$$.fragment),i=P("Save"),s=k(),_=p("button"),L(f.$$.fragment),g=P(" Cancel"),z=k(),d=p("fieldset"),F=p("label"),H=P("Order Id"),J=k(),w=p("input"),Q=k(),L(S.$$.fragment),R=k(),L(N.$$.fragment),W=k(),L(T.$$.fragment),Y=k(),L(y.$$.fragment),this.h()},l(m){e=h(m,"H1",{});var U=$(e);l=E(U,"Order Item"),U.forEach(u),n=O(m),r=h(m,"FORM",{});var V=$(r);t=h(V,"BUTTON",{});var j=$(t);C(a.$$.fragment,j),i=E(j,"Save"),j.forEach(u),s=O(V),_=h(V,"BUTTON",{});var G=$(_);C(f.$$.fragment,G),g=E(G," Cancel"),G.forEach(u),z=O(V),d=h(V,"FIELDSET",{});var b=$(d);F=h(b,"LABEL",{for:!0});var te=$(F);H=E(te,"Order Id"),te.forEach(u),J=O(b),w=h(b,"INPUT",{id:!0,name:!0,type:!0}),Q=O(b),C(S.$$.fragment,b),R=O(b),C(N.$$.fragment,b),W=O(b),C(T.$$.fragment,b),Y=O(b),C(y.$$.fragment,b),b.forEach(u),V.forEach(u),this.h()},h(){I(F,"for","OrderId"),I(w,"id","OrderId"),I(w,"name","OrderId"),I(w,"type","number"),w.readOnly=!0},m(m,U){v(m,e,U),c(e,l),v(m,n,U),v(m,r,U),c(r,t),q(a,t,null),c(t,i),c(r,s),c(r,_),q(f,_,null),c(_,g),c(r,z),c(r,d),c(d,F),c(F,H),c(d,J),c(d,w),c(d,Q),q(S,d,null),c(d,R),q(N,d,null),c(d,W),q(T,d,null),c(d,Y),q(y,d,null),M=!0,Z||(ee=[de(_,"click",pe(o[1])),he(o[0].call(null,r))],Z=!0)},p:ue,i(m){M||(A(a.$$.fragment,m),A(f.$$.fragment,m),A(S.$$.fragment,m),A(N.$$.fragment,m),A(T.$$.fragment,m),A(y.$$.fragment,m),M=!0)},o(m){B(a.$$.fragment,m),B(f.$$.fragment,m),B(S.$$.fragment,m),B(N.$$.fragment,m),B(T.$$.fragment,m),B(y.$$.fragment,m),M=!1},d(m){m&&u(e),m&&u(n),m&&u(r),D(a),D(f),D(S),D(N),D(T),D(y),Z=!1,$e(ee)}}}function Ue(o,e,l){let n;ve(o,Ee,i=>l(2,n=i));const r=parseInt(n.params.id),{form:t}=Ne({initialValues:{OrderId:r},async onSubmit(i){await Ie.create(i);const s=i.ProductId,_=`/orders/${n.params.id}/items/${s}`;ne(_)},validate:be(Pe),extend:[ge]});return[t,()=>{ne(`/orders/${r}/items`)}]}class Ge extends ie{constructor(e){super(),se(this,e,Ue,Fe,fe,{})}}export{Ge as default};
